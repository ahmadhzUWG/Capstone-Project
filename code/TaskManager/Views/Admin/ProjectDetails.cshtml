@model TaskManagerWebsite.Models.Project

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/Admin/projectDetails.css" />

<div class="container">
    <!-- Project Header -->
    <div class="project-header">
        <h2>@Model.Name</h2>
        <p>Description: @Model.Description</p>
    </div>


        <button type="submit" class="btn btn-success mt-2">Assign Group</button>
    </form>
    
    <a href="@Url.Action("ProjectBoard", "Admin", new { id = Model.Id })" class="btn btn-info">View Project Board</a>

    <!-- Project Lead Info -->
    <div class="project-section">
        <h3>Project Lead</h3>
        @if (Model.ProjectLead != null)
        {
            <p class="lead-info">
                <strong>@Model.ProjectLead.UserName (@Model.ProjectLead.Email)</strong>
            </p>
        }
        else
        {
            <p class="lead-info"><strong>No project lead assigned.</strong></p>
        }
        <a asp-action="EditProject" asp-route-id="@Model.Id" class="btn btn-info mt-2">
            Edit Project
        </a>
    </div>

    <!-- Group Assignment Section (Partial) -->
    <div class="project-section">
        @await Html.PartialAsync("_GroupAssignmentPartial", Model)
    </div>

    <!-- Back to Projects Button -->
    <div class="back-button">
        <a href="@Url.Action("Projects", "Admin")" class="btn btn-secondary">Back to Projects</a>
    </div>
</div>


@section Scripts {
    <script src="~/lib/jquery.unobtrusive-ajax.min.js"></script>
    <script>
        function refreshGroupAssignment(htmlSnippet) {
            $("#group-assignment-container").html(htmlSnippet);
        }

        function groupActionFailed(xhr, status, error) {
            alert("An error occurred while processing the request.");
            console.error("Error:", error);
        }
    </script>
}
