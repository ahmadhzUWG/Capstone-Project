<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Users\Nick\Desktop\Capstone-Project\code\TaskManager.Tests\Tests\TestControllers\EmployeeControllerTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Security.Claims;
using System.Windows.Forms;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Identity;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.ViewFeatures;
using Microsoft.EntityFrameworkCore;
using Microsoft.Extensions.Primitives;
using Moq;
using TaskManagerWebsite.Controllers;
using TaskManagerWebsite.Data;
using TaskManagerWebsite.Models;
using TaskManagerWebsite.ViewModels.ProjectViewModels;
using Task = System.Threading.Tasks.Task;

namespace TaskManager.Tests.Tests.TestControllers
{
    public class EmployeeControllerTests
    {
        private ApplicationDbContext CreateContext(string dbName)
        {
            var options = new DbContextOptionsBuilder&lt;ApplicationDbContext&gt;()
                .UseInMemoryDatabase(dbName)
                .Options;
            return new ApplicationDbContext(options);
        }

        private UserManager&lt;User&gt; CreateUserManager(User user, bool isAdmin = false)
        {
            var store = new Mock&lt;IUserStore&lt;User&gt;&gt;();
            var mockUM = new Mock&lt;UserManager&lt;User&gt;&gt;(
                store.Object, null, null, null, null, null, null, null, null);
            mockUM.Setup(um =&gt; um.GetUserId(It.IsAny&lt;ClaimsPrincipal&gt;()))
                .Returns(user.Id.ToString());
            mockUM.Setup(um =&gt; um.FindByIdAsync(It.IsAny&lt;string&gt;()))
                .ReturnsAsync(user);
            mockUM.Setup(um =&gt; um.IsInRoleAsync(It.IsAny&lt;User&gt;(), &quot;Admin&quot;))
                .ReturnsAsync(isAdmin);
            mockUM.Setup(um =&gt; um.GetUserAsync(It.IsAny&lt;ClaimsPrincipal&gt;()))
                .ReturnsAsync(user);
            return mockUM.Object;
        }

        private RoleManager&lt;IdentityRole&lt;int&gt;&gt; CreateRoleManager()
        {
            var roleStore = new Mock&lt;IRoleStore&lt;IdentityRole&lt;int&gt;&gt;&gt;();
            return new RoleManager&lt;IdentityRole&lt;int&gt;&gt;(roleStore.Object, null, null, null, null);
        }

        private ControllerContext CreateControllerContext(User user)
        {
            var identity = new ClaimsIdentity(new[]
            {
                new Claim(ClaimTypes.NameIdentifier, user.Id.ToString())
            }, &quot;TestAuth&quot;);
            return new ControllerContext
            {
                HttpContext = new DefaultHttpContext { User = new ClaimsPrincipal(identity) }
            };
        }

        private void InitializeTempData(Controller controller)
        {
            controller.TempData =
                new TempDataDictionary(controller.ControllerContext.HttpContext, Mock.Of&lt;ITempDataProvider&gt;());
        }

        // ------------------- Users &amp; Groups -------------------

        [Fact]
        public async Task Users_ReturnsAllUsers()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.AddRange(new List&lt;User&gt;
            {
                new User { Id = 1, UserName = &quot;user1&quot; },
                new User { Id = 2, UserName = &quot;user2&quot; }
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(currentUser)
            };
            InitializeTempData(controller);

            var result = await controller.Users() as ViewResult;
            var model = result.Model as List&lt;User&gt;;
            Assert.Equal(2, model.Count);
        }

        [Fact]
        public async Task Groups_ReturnsAllGroups()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Groups.AddRange(new List&lt;Group&gt;
            {
                new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; },
                new Group { Id = 2, Name = &quot;Group2&quot;, Description = &quot;Desc2&quot; }
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(currentUser)
            };
            InitializeTempData(controller);

            var result = await controller.Groups() as ViewResult;
            var model = result.Model as List&lt;Group&gt;;
            Assert.Equal(2, model.Count);
        }

        // ------------------- GroupDetails -------------------

        [Fact]
        public async Task GroupDetails_ReturnsNotFound_IfGroupMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.GroupDetails(999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task GroupDetails_ReturnsView_WithViewBagValues()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var group = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot;, ManagerId = 2 };
            context.Groups.Add(group);
            context.UserGroups.AddRange(new List&lt;UserGroup&gt;
            {
                new UserGroup { GroupId = 1, UserId = 3, Role = &quot;Member&quot; },
                new UserGroup { GroupId = 1, UserId = 4, Role = &quot;Member&quot; }
            });
            context.Users.AddRange(new List&lt;User&gt;
            {
                new User { Id = 2, UserName = &quot;manager&quot; },
                new User { Id = 3, UserName = &quot;user3&quot; },
                new User { Id = 4, UserName = &quot;user4&quot; },
                new User { Id = 5, UserName = &quot;user5&quot; }
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 2, UserName = &quot;manager&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.GroupDetails(1) as ViewResult;
            Assert.NotNull(result);
            Assert.NotNull(result.ViewData[&quot;Users&quot;]);
            Assert.NotNull(result.ViewData[&quot;AvailableManagers&quot;]);
            Assert.NotNull(result.ViewData[&quot;GroupUsers&quot;]);
        }

        // ------------------- AddUserToGroup &amp; RemoveUserFromGroup -------------------

        [Fact]
        public async Task AddUserToGroup_ReturnsNotFound_IfGroupOrUserMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AddUserToGroup(1, 1);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task AddUserToGroup_AddsUser_IfNotAlreadyMember()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Groups.Add(new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; });
            context.Users.AddRange(new List&lt;User&gt;
            {
                new User { Id = 1, UserName = &quot;user1&quot; },
                new User { Id = 2, UserName = &quot;user2&quot; }
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AddUserToGroup(1, 2) as RedirectToActionResult;
            Assert.Equal(&quot;GroupDetails&quot;, result.ActionName);
            Assert.Single(context.UserGroups.Where(ug =&gt; ug.UserId == 2 &amp;&amp; ug.GroupId == 1));
        }

        [Fact]
        public async Task RemoveUserFromGroup_RemovesMembership_IfExists()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.UserGroups.Add(new UserGroup { GroupId = 1, UserId = 1, Role = &quot;Member&quot; });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.RemoveUserFromGroup(1, 1) as RedirectToActionResult;
            Assert.Equal(&quot;GroupDetails&quot;, result.ActionName);
            Assert.Empty(context.UserGroups);
        }

        // ------------------- ChangeManager -------------------

        [Fact]
        public async Task ChangeManager_ReturnsNotFound_IfGroupMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.ChangeManager(999, 2);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task ChangeManager_ReturnsNotFound_IfNewManagerMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Groups.Add(new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc&quot; });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.ChangeManager(1, 999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task ChangeManager_UpdatesManager_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var group = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc&quot; };
            context.Groups.Add(group);
            context.Users.AddRange(new List&lt;User&gt;
            {
                new User { Id = 1, UserName = &quot;user1&quot; },
                new User { Id = 2, UserName = &quot;user2&quot; }
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.ChangeManager(1, 2) as RedirectToActionResult;
            Assert.Equal(&quot;GroupDetails&quot;, result.ActionName);
            var updatedGroup = await context.Groups.FindAsync(1);
            Assert.Equal(2, updatedGroup.ManagerId);
        }

        [Fact]
        public async Task ChangeManager_ChangesManagerRoleAndDemotesPrevious_IfBothExist()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var group = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc&quot;, ManagerId = 1 };
            context.Groups.Add(group);
            context.Users.AddRange(
                new User { Id = 1, UserName = &quot;OldManager&quot; },
                new User { Id = 2, UserName = &quot;NewManager&quot; }
            );
            context.UserGroups.AddRange(
                new UserGroup { GroupId = 1, UserId = 1, Role = &quot;Manager&quot; },
                new UserGroup { GroupId = 1, UserId = 2, Role = &quot;Member&quot; }
            );
            await context.SaveChangesAsync();

            var controller = new EmployeeController(context, CreateUserManager(new User { Id = 2 }), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(new User { Id = 2 })
            };
            InitializeTempData(controller);

            var result = await controller.ChangeManager(1, 2);

            Assert.IsType&lt;RedirectToActionResult&gt;(result);
            var updatedGroup = await context.Groups.FindAsync(1);
            Assert.Equal(2, updatedGroup.ManagerId);

            var oldManager = await context.UserGroups.FirstOrDefaultAsync(u =&gt; u.UserId == 1 &amp;&amp; u.GroupId == 1);
            var newManager = await context.UserGroups.FirstOrDefaultAsync(u =&gt; u.UserId == 2 &amp;&amp; u.GroupId == 1);
            Assert.Equal(&quot;Member&quot;, oldManager.Role);
            Assert.Equal(&quot;Manager&quot;, newManager.Role);
        }

        // ------------------- CreateProject (GET &amp; POST) -------------------

        [Fact]
        public async Task CreateProject_Get_ReturnsView_WithProjectLeadsAndGroups()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            context.Groups.Add(new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc&quot; });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.CreateProject() as ViewResult;
            Assert.NotNull(result.ViewData[&quot;ProjectLead&quot;]);
            Assert.NotNull(result.ViewData[&quot;Groups&quot;]);
        }

        [Fact]
        public async Task CreateProject_Post_ReturnsView_IfInvalid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            await context.SaveChangesAsync();

            var model = new CreateProjectViewModel { Name = &quot;NewProj&quot;, Description = &quot;NewDesc&quot;, ProjectLeadId = 1 };
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            controller.ModelState.AddModelError(&quot;Error&quot;, &quot;Invalid&quot;);
            InitializeTempData(controller);

            var result = await controller.CreateProject(model) as ViewResult;
            Assert.NotNull(result);
        }

        [Fact]
        public async Task CreateProject_Post_ReturnsError_IfUserNotAuthenticated()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            await context.SaveChangesAsync();

            var model = new CreateProjectViewModel
            {
                Name = &quot;Test Project&quot;,
                Description = &quot;Some description&quot;,
                ProjectLeadId = 1
            };

            var user = new User { Id = 1, UserName = &quot;user1&quot; };

            var mockUserManager = new Mock&lt;UserManager&lt;User&gt;&gt;(new Mock&lt;IUserStore&lt;User&gt;&gt;().Object,
                null, null, null, null, null, null, null, null);

            mockUserManager.Setup(m =&gt; m.GetUserId(It.IsAny&lt;ClaimsPrincipal&gt;())).Returns(string.Empty);
            mockUserManager.Setup(m =&gt; m.FindByIdAsync(It.IsAny&lt;string&gt;())).ReturnsAsync((User)null);

            var controller = new EmployeeController(context, mockUserManager.Object, CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(user)
            };
            InitializeTempData(controller);

            controller.ModelState.Clear();

            var result = await controller.CreateProject(model) as ViewResult;

            Assert.NotNull(result);
            Assert.True(controller.ModelState.ErrorCount &gt; 0);
            Assert.Contains(controller.ModelState, m =&gt; m.Value.Errors.Any());
        }

        [Fact]
        public async Task CreateProject_Post_CreatesProjectAndAssignsGroups_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());

            var user = new User { Id = 1, UserName = &quot;user1&quot; };
            var group = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Test group&quot;, ManagerId = user.Id };

            context.Users.Add(user);
            context.Groups.Add(group);
            await context.SaveChangesAsync();

            var model = new CreateProjectViewModel
            {
                Name = &quot;Test Project&quot;,
                Description = &quot;Test Desc&quot;,
                ProjectLeadId = user.Id
            };

            var controller = new EmployeeController(context, CreateUserManager(user), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(user)
            };
            InitializeTempData(controller);

            var formCollection = new Mock&lt;IFormCollection&gt;();
            formCollection.Setup(f =&gt; f[&quot;GroupId&quot;]).Returns(new Microsoft.Extensions.Primitives.StringValues(&quot;1&quot;));

            var mockRequest = new Mock&lt;HttpRequest&gt;();
            mockRequest.Setup(r =&gt; r.Form).Returns(formCollection.Object);

            var mockContext = new Mock&lt;HttpContext&gt;();
            mockContext.Setup(c =&gt; c.Request).Returns(mockRequest.Object);
            controller.ControllerContext.HttpContext = mockContext.Object;

            var result = await controller.CreateProject(model);

            Assert.IsType&lt;RedirectToActionResult&gt;(result);
            Assert.Single(context.Projects);
            Assert.Single(context.GroupProjects);
        }

        // ------------------- ProjectDetails -------------------

        [Fact]
        public async Task ProjectDetails_ReturnsNotFound_IfProjectMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.ProjectDetails(999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task ProjectDetails_ReturnsView_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Groups.AddRange(new Group
                    { Id = 1, Name = &quot;Group1&quot;, Description = &quot;D1&quot;, ManagerId = 2 },
                new Group { Id = 2, Name = &quot;Group2&quot;, Description = &quot;D2&quot;, ManagerId = 3 });
            context.Users.AddRange(new User { Id = 1, UserName = &quot;user1&quot; },
                new User { Id = 2, UserName = &quot;manager1&quot; },
                new User { Id = 3, UserName = &quot;manager2&quot; });
            var proj = new Project
            {
                Id = 1,
                Name = &quot;Proj1&quot;,
                Description = &quot;D1&quot;,
                ProjectLeadId = 1,
                ProjectGroups = new List&lt;GroupProject&gt;
                {
                    new GroupProject { GroupId = 1 }
                }
            };
            context.Projects.Add(proj);
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.ProjectDetails(1) as ViewResult;
            Assert.NotNull(result);
        }

        // ------------------- EditProject -------------------

        [Fact]
        public async Task EditProject_Get_ReturnsNotFound_IfProjectMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.EditProject(999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task EditProject_Get_ReturnsView_IfFound()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Projects.Add(new Project { Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.EditProject(1) as ViewResult;
            Assert.NotNull(result);
        }

        [Fact]
        public async Task EditProject_Post_ReturnsBadRequest_IfIdMismatch()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Projects.Add(new Project { Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var proj = new Project { Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 };
            var result = await controller.EditProject(2, proj);
            Assert.IsType&lt;BadRequestResult&gt;(result);
        }

        [Fact]
        public async Task EditProject_Post_UpdatesProject_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var proj = new Project { Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 };
            context.Projects.Add(proj);
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            proj.Name = &quot;Updated&quot;;
            var result = await controller.EditProject(1, proj) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
            Assert.Equal(&quot;Updated&quot;, (await context.Projects.FindAsync(1)).Name);
        }

        [Fact]
        public async Task EditProject_Post_ReturnsView_IfModelStateInvalid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var project = new Project { Id = 1, Name = &quot;Project1&quot;, Description = &quot;Desc&quot;, ProjectLeadId = 1 };
            context.Projects.Add(project);
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            await context.SaveChangesAsync();

            var controller = new EmployeeController(context, CreateUserManager(new User { Id = 1 }), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(new User { Id = 1 })
            };
            InitializeTempData(controller);
            controller.ModelState.AddModelError(&quot;Error&quot;, &quot;Invalid&quot;);

            var result = await controller.EditProject(1, project);

            Assert.IsType&lt;ViewResult&gt;(result);
        }

        [Fact]
        public async Task DeleteProject_Post_DeletesProject_IfExists()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Projects.Add(new Project { Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.DeleteProject(1) as RedirectToActionResult;
            Assert.Equal(&quot;Projects&quot;, result.ActionName);
            Assert.Empty(context.Projects);
        }

        // ------------------- RequestGroupToProject -------------------

        [Fact]
        public async Task RequestGroupToProject_ReturnsUnauthorized_IfUserMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var umMock = new Mock&lt;UserManager&lt;User&gt;&gt;(new Mock&lt;IUserStore&lt;User&gt;&gt;().Object, null, null, null, null, null,
                null, null, null);
            umMock.Setup(um =&gt; um.GetUserId(It.IsAny&lt;ClaimsPrincipal&gt;())).Returns(&quot;&quot;);
            var controller = new EmployeeController(context, umMock.Object, CreateRoleManager());
            var result = await controller.RequestGroupToProject(1, 1);
            Assert.IsType&lt;UnauthorizedResult&gt;(result);
        }

        [Fact]
        public async Task RequestGroupToProject_ReturnsError_IfProjectOrGroupMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.RequestGroupToProject(999, 999) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
        }

        [Fact]
        public async Task RequestGroupToProject_CreatesRequest_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.Users.Add(new User { Id = 1, UserName = &quot;user1&quot; });
            var proj = new Project
            {
                Id = 1, Name = &quot;Proj1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1, ProjectGroups = new List&lt;GroupProject&gt;()
            };
            var grp = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; };
            context.Projects.Add(proj);
            context.Groups.Add(grp);
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.RequestGroupToProject(1, 1) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
            Assert.Single(context.GroupRequests);
        }

        // ------------------- AcceptRequest -------------------

        [Fact]
        public async Task AcceptRequest_ReturnsNotFound_IfRequestMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AcceptRequest(999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task AcceptRequest_CreatesGroupAssignment_IfNotAlreadyAssigned()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var proj = new Project
            {
                Id = 1,
                Name = &quot;Proj1&quot;,
                Description = &quot;D1&quot;,
                ProjectLeadId = 1,
                ProjectGroups = new List&lt;GroupProject&gt;()
            };
            var grp = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; };
            context.Projects.Add(proj);
            context.Groups.Add(grp);
            await context.SaveChangesAsync();

            context.GroupRequests.Add(new GroupRequest
            {
                Id = 1,
                SenderId = 1,
                ProjectId = 1,
                GroupId = 1,
                Response = null
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AcceptRequest(1) as RedirectToActionResult;
            Assert.Equal(&quot;Projects&quot;, result.ActionName);
            Assert.Single(context.GroupProjects);
            var request = await context.GroupRequests.FindAsync(1);
            Assert.True(request.Response);
        }

        // ------------------- DenyRequest -------------------

        [Fact]
        public async Task DenyRequest_ReturnsNotFound_IfRequestMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.DenyRequest(999);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task DenyRequest_SetsResponseToFalse_IfValid()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var proj = new Project
            {
                Id = 1,
                Name = &quot;Proj1&quot;,
                Description = &quot;D1&quot;,
                ProjectLeadId = 1,
                ProjectGroups = new List&lt;GroupProject&gt;()
            };
            var grp = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; };
            context.Projects.Add(proj);
            context.Groups.Add(grp);
            await context.SaveChangesAsync();

            context.GroupRequests.Add(new GroupRequest
            {
                Id = 1,
                SenderId = 1,
                ProjectId = 1,
                GroupId = 1,
                Response = null
            });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.DenyRequest(1) as RedirectToActionResult;
            Assert.Equal(&quot;Projects&quot;, result.ActionName);
            var request = await context.GroupRequests.FindAsync(1);
            Assert.False(request.Response);
        }

        // ------------------- DeleteGroupRequest -------------------

        [Fact]
        public async Task DeleteGroupRequest_DeletesRequest_IfFound()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            context.GroupRequests.Add(new GroupRequest
                { Id = 1, SenderId = 1, ProjectId = 1, GroupId = 1, Response = null });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.DeleteGroupRequest(1) as RedirectToActionResult;
            Assert.Equal(&quot;Projects&quot;, result.ActionName);
            Assert.Empty(context.GroupRequests);
        }

        [Fact]
        public async Task DeleteGroupRequest_Redirects_IfNotFound()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.DeleteGroupRequest(999) as RedirectToActionResult;
            Assert.Equal(&quot;Projects&quot;, result.ActionName);
        }

        // ------------------- AssignGroupToProject -------------------

        [Fact]
        public async Task AssignGroupToProject_RedirectsWithError_IfProjectOrGroupMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AssignGroupToProject(999, 999) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
        }

        [Fact]
        public async Task AssignGroupToProject_AddsGroupToProject_IfNotAlreadyAssigned()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var proj = new Project
            {
                Id = 1,
                Name = &quot;Proj1&quot;,
                Description = &quot;D1&quot;,
                ProjectLeadId = 1,
                ProjectGroups = new List&lt;GroupProject&gt;()
            };
            context.Projects.Add(proj);
            context.Groups.Add(new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Desc1&quot; });
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.AssignGroupToProject(1, 1) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
            Assert.Single(context.GroupProjects);
        }

        // ------------------- RemoveGroupFromProject -------------------

        [Fact]
        public async Task RemoveGroupFromProject_ReturnsNotFound_IfProjectMissing()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.RemoveGroupFromProject(999, 1);
            Assert.IsType&lt;NotFoundResult&gt;(result);
        }

        [Fact]
        public async Task RemoveGroupFromProject_RemovesAssignment_IfExists()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());
            var proj = new Project
            {
                Id = 1,
                Name = &quot;Proj1&quot;,
                Description = &quot;D1&quot;,
                ProjectLeadId = 1,
                ProjectGroups = new List&lt;GroupProject&gt; { new GroupProject { GroupId = 1 } }
            };
            context.Projects.Add(proj);
            await context.SaveChangesAsync();

            var currentUser = new User { Id = 1, UserName = &quot;user1&quot; };
            var controller = new EmployeeController(context, CreateUserManager(currentUser), CreateRoleManager())
                { ControllerContext = CreateControllerContext(currentUser) };
            InitializeTempData(controller);

            var result = await controller.RemoveGroupFromProject(1, 1) as RedirectToActionResult;
            Assert.Equal(&quot;ProjectDetails&quot;, result.ActionName);
            Assert.Empty(proj.ProjectGroups);
        }

        // ------------------- Projects -------------------
        [Fact]
        public async Task Projects_ReturnsProjectsView_WithCorrectViewBags()
        {
            using var context = CreateContext(Guid.NewGuid().ToString());

            var user = new User { Id = 1, UserName = &quot;manager&quot; };
            var project1 = new Project { Id = 1, Name = &quot;P1&quot;, Description = &quot;D1&quot;, ProjectLeadId = 1 };
            var project2 = new Project { Id = 2, Name = &quot;P2&quot;, Description = &quot;D2&quot;, ProjectLeadId = 1 };

            var group = new Group { Id = 1, Name = &quot;Group1&quot;, Description = &quot;Some group&quot;, ManagerId = 1 };

            var request1 = new GroupRequest { Id = 1, GroupId = 1, ProjectId = 1, SenderId = 1, Response = null };
            var request2 = new GroupRequest { Id = 2, GroupId = 1, ProjectId = 2, SenderId = 1, Response = true };

            context.Users.Add(user);
            context.Groups.Add(group);
            context.Projects.AddRange(project1, project2);
            context.GroupRequests.AddRange(request1, request2);
            await context.SaveChangesAsync();

            var controller = new EmployeeController(context, CreateUserManager(user), CreateRoleManager())
            {
                ControllerContext = CreateControllerContext(user)
            };
            InitializeTempData(controller);

            var result = await controller.Projects() as ViewResult;

            Assert.NotNull(result);
            Assert.IsType&lt;List&lt;Project&gt;&gt;(result.Model);
            Assert.True((bool)controller.ViewData[&quot;IsManager&quot;]);
            Assert.NotNull(controller.ViewData[&quot;GroupRequests&quot;]);
            Assert.NotNull(controller.ViewData[&quot;SentGroupRequests&quot;]);
        }

        

        


    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[21,9,21,10,1],[22,13,24,26,1],[25,13,25,54,1],[26,9,26,10,1],[29,9,29,10,1],[30,13,30,54,1],[31,13,32,79,1],[33,13,34,46,1],[35,13,36,37,1],[37,13,38,40,1],[39,13,40,37,1],[41,13,41,34,1],[42,9,42,10,1],[45,9,45,10,1],[46,13,46,71,1],[47,13,47,97,1],[48,9,48,10,1],[51,9,51,10,1],[52,13,55,28,1],[56,13,59,15,1],[60,9,60,10,1],[63,9,63,10,1],[64,13,65,112,1],[66,9,66,10,1],[72,9,72,10,1],[73,13,73,74,1],[74,13,78,16,1],[79,13,79,46,1],[81,13,81,71,1],[82,13,85,15,1],[86,13,86,44,1],[88,13,88,65,1],[89,13,89,52,1],[90,13,90,42,1],[91,9,91,10,1],[95,9,95,10,1],[96,13,96,74,1],[97,13,101,16,1],[102,13,102,46,1],[104,13,104,71,1],[105,13,108,15,1],[109,13,109,44,1],[111,13,111,66,1],[112,13,112,53,1],[113,13,113,42,1],[114,9,114,10,1],[120,9,120,10,1],[121,13,121,74,1],[122,13,122,71,1],[123,13,124,78,1],[125,13,125,44,1],[127,13,127,61,1],[128,13,128,51,1],[129,9,129,10,1],[133,9,133,10,1],[134,13,134,74,1],[135,13,135,101,1],[136,13,136,39,1],[137,13,141,16,1],[142,13,148,16,1],[149,13,149,46,1],[151,13,151,73,1],[152,13,153,78,1],[154,13,154,44,1],[156,13,156,73,1],[157,13,157,36,1],[158,13,158,54,1],[159,13,159,66,1],[160,13,160,59,1],[161,9,161,10,1],[167,9,167,10,1],[168,13,168,74,1],[169,13,169,71,1],[170,13,171,78,1],[172,13,172,44,1],[174,13,174,64,1],[175,13,175,51,1],[176,9,176,10,1],[180,9,180,10,1],[181,13,181,74,1],[182,13,182,94,1],[183,13,187,16,1],[188,13,188,46,1],[190,13,190,71,1],[191,13,192,78,1],[193,13,193,44,1],[195,13,195,90,1],[196,13,196,61,1],[197,13,197,94,1],[198,9,198,10,1],[202,9,202,10,1],[203,13,203,74,1],[204,13,204,96,1],[205,13,205,46,1],[207,13,207,71,1],[208,13,209,78,1],[210,13,210,44,1],[212,13,212,95,1],[213,13,213,61,1],[214,13,214,46,1],[215,9,215,10,1],[221,9,221,10,1],[222,13,222,74,1],[223,13,223,71,1],[224,13,225,78,1],[226,13,226,44,1],[228,13,228,65,1],[229,13,229,51,1],[230,9,230,10,1],[234,9,234,10,1],[235,13,235,74,1],[236,13,236,93,1],[237,13,237,46,1],[239,13,239,71,1],[240,13,241,78,1],[242,13,242,44,1],[244,13,244,65,1],[245,13,245,51,1],[246,9,246,10,1],[250,9,250,10,1],[251,13,251,74,1],[252,13,252,85,1],[253,13,253,39,1],[254,13,258,16,1],[259,13,259,46,1],[261,13,261,71,1],[262,13,263,78,1],[264,13,264,44,1],[266,13,266,89,1],[267,13,267,61,1],[268,13,268,66,1],[269,13,269,53,1],[270,9,270,10,1],[274,9,274,10,1],[275,13,275,74,1],[276,13,276,100,1],[277,13,277,39,1],[278,13,281,15,1],[282,13,285,15,1],[286,13,286,46,1],[288,13,291,15,1],[292,13,292,44,1],[294,13,294,63,1],[296,13,296,59,1],[297,13,297,66,1],[298,13,298,53,1],[300,13,300,113,1],[301,13,301,113,1],[302,13,302,53,1],[303,13,303,54,1],[304,9,304,10,1],[310,9,310,10,1],[311,13,311,74,1],[312,13,312,72,1],[313,13,313,93,1],[314,13,314,46,1],[316,13,316,71,1],[317,13,318,78,1],[319,13,319,44,1],[321,13,321,73,1],[322,13,322,60,1],[323,13,323,55,1],[324,9,324,10,1],[328,9,328,10,1],[329,13,329,74,1],[330,13,330,72,1],[331,13,331,46,1],[333,13,333,117,1],[334,13,334,71,1],[335,13,336,78,1],[337,13,337,69,1],[338,13,338,44,1],[340,13,340,78,1],[341,13,341,36,1],[342,9,342,10,1],[346,9,346,10,1],[347,13,347,74,1],[348,13,348,72,1],[349,13,349,46,1],[351,13,356,15,1],[358,13,358,64,1],[360,13,361,65,1],[363,13,363,104,1],[364,13,364,102,1],[366,13,369,15,1],[370,13,370,44,1],[372,13,372,43,1],[374,13,374,78,1],[376,13,376,36,1],[377,13,377,63,1],[378,13,378,57,1],[378,57,378,77,1],[378,77,378,79,1],[379,9,379,10,1],[383,9,383,10,1],[384,13,384,74,1],[386,13,386,64,1],[387,13,387,112,1],[389,13,389,37,1],[390,13,390,39,1],[391,13,391,46,1],[393,13,398,15,1],[400,13,403,15,1],[404,13,404,44,1],[406,13,406,62,1],[407,13,407,116,1],[409,13,409,55,1],[410,13,410,75,1],[412,13,412,55,1],[413,13,413,75,1],[414,13,414,75,1],[416,13,416,64,1],[418,13,418,59,1],[419,13,419,45,1],[420,13,420,50,1],[421,9,421,10,1],[427,9,427,10,1],[428,13,428,74,1],[429,13,429,71,1],[430,13,431,78,1],[432,13,432,44,1],[434,13,434,63,1],[435,13,435,51,1],[436,9,436,10,1],[440,9,440,10,1],[441,13,441,74,1],[442,13,444,91,1],[445,13,447,61,1],[448,13,458,15,1],[459,13,459,40,1],[460,13,460,46,1],[462,13,462,71,1],[463,13,464,78,1],[465,13,465,44,1],[467,13,467,75,1],[468,13,468,36,1],[469,9,469,10,1],[475,9,475,10,1],[476,13,476,74,1],[477,13,477,71,1],[478,13,479,78,1],[480,13,480,44,1],[482,13,482,60,1],[483,13,483,51,1],[484,9,484,10,1],[488,9,488,10,1],[489,13,489,74,1],[490,13,490,113,1],[491,13,491,46,1],[493,13,493,71,1],[494,13,495,78,1],[496,13,496,44,1],[498,13,498,72,1],[499,13,499,36,1],[500,9,500,10,1],[504,9,504,10,1],[505,13,505,74,1],[506,13,506,113,1],[507,13,507,46,1],[509,13,509,71,1],[510,13,511,78,1],[512,13,512,44,1],[514,13,514,102,1],[515,13,515,64,1],[516,13,516,53,1],[517,9,517,10,1],[521,9,521,10,1],[522,13,522,74,1],[523,13,523,102,1],[524,13,524,40,1],[525,13,525,46,1],[527,13,527,71,1],[528,13,529,78,1],[530,13,530,44,1],[532,13,532,35,1],[533,13,533,90,1],[534,13,534,63,1],[535,13,535,81,1],[536,9,536,10,1],[540,9,540,10,1],[541,13,541,74,1],[542,13,542,110,1],[543,13,543,43,1],[544,13,544,72,1],[545,13,545,46,1],[547,13,550,15,1],[551,13,551,44,1],[552,13,552,69,1],[554,13,554,67,1],[556,13,556,47,1],[557,9,557,10,1],[561,9,561,10,1],[562,13,562,74,1],[563,13,563,113,1],[564,13,564,46,1],[566,13,566,71,1],[567,13,568,78,1],[569,13,569,44,1],[571,13,571,86,1],[572,13,572,57,1],[573,13,573,44,1],[574,9,574,10,1],[580,9,580,10,1],[581,13,581,74,1],[582,13,583,35,1],[584,13,584,87,1],[585,13,585,98,1],[586,13,586,71,1],[587,13,587,55,1],[588,9,588,10,1],[592,9,592,10,1],[593,13,593,74,1],[594,13,594,72,1],[595,13,595,46,1],[597,13,597,71,1],[598,13,599,78,1],[600,13,600,44,1],[602,13,602,101,1],[603,13,603,63,1],[604,9,604,10,1],[608,9,608,10,1],[609,13,609,74,1],[610,13,610,72,1],[611,13,614,15,1],[615,13,615,84,1],[616,13,616,40,1],[617,13,617,37,1],[618,13,618,46,1],[620,13,620,71,1],[621,13,622,78,1],[623,13,623,44,1],[625,13,625,97,1],[626,13,626,63,1],[627,13,627,50,1],[628,9,628,10,1],[634,9,634,10,1],[635,13,635,74,1],[636,13,636,71,1],[637,13,638,78,1],[639,13,639,44,1],[641,13,641,62,1],[642,13,642,51,1],[643,9,643,10,1],[647,9,647,10,1],[648,13,648,74,1],[649,13,656,15,1],[657,13,657,84,1],[658,13,658,40,1],[659,13,659,37,1],[660,13,660,46,1],[662,13,669,16,1],[670,13,670,46,1],[672,13,672,71,1],[673,13,674,78,1],[675,13,675,44,1],[677,13,677,86,1],[678,13,678,57,1],[679,13,679,50,1],[680,13,680,68,1],[681,13,681,43,1],[682,9,682,10,1],[688,9,688,10,1],[689,13,689,74,1],[690,13,690,71,1],[691,13,692,78,1],[693,13,693,44,1],[695,13,695,60,1],[696,13,696,51,1],[697,9,697,10,1],[701,9,701,10,1],[702,13,702,74,1],[703,13,710,15,1],[711,13,711,84,1],[712,13,712,40,1],[713,13,713,37,1],[714,13,714,46,1],[716,13,723,16,1],[724,13,724,46,1],[726,13,726,71,1],[727,13,728,78,1],[729,13,729,44,1],[731,13,731,84,1],[732,13,732,57,1],[733,13,733,68,1],[734,13,734,44,1],[735,9,735,10,1],[741,9,741,10,1],[742,13,742,74,1],[743,13,744,88,1],[745,13,745,46,1],[747,13,747,71,1],[748,13,749,78,1],[750,13,750,44,1],[752,13,752,91,1],[753,13,753,57,1],[754,13,754,49,1],[755,9,755,10,1],[759,9,759,10,1],[760,13,760,74,1],[761,13,761,71,1],[762,13,763,78,1],[764,13,764,44,1],[766,13,766,93,1],[767,13,767,57,1],[768,9,768,10,1],[774,9,774,10,1],[775,13,775,74,1],[776,13,776,71,1],[777,13,778,78,1],[779,13,779,44,1],[781,13,781,100,1],[782,13,782,63,1],[783,9,783,10,1],[787,9,787,10,1],[788,13,788,74,1],[789,13,796,15,1],[797,13,797,40,1],[798,13,798,94,1],[799,13,799,46,1],[801,13,801,71,1],[802,13,803,78,1],[804,13,804,44,1],[806,13,806,96,1],[807,13,807,63,1],[808,13,808,50,1],[809,9,809,10,1],[815,9,815,10,1],[816,13,816,74,1],[817,13,817,71,1],[818,13,819,78,1],[820,13,820,44,1],[822,13,822,74,1],[823,13,823,51,1],[824,9,824,10,1],[828,9,828,10,1],[829,13,829,74,1],[830,13,837,15,1],[838,13,838,40,1],[839,13,839,46,1],[841,13,841,71,1],[842,13,843,78,1],[844,13,844,44,1],[846,13,846,98,1],[847,13,847,63,1],[848,13,848,46,1],[849,9,849,10,1],[854,9,854,10,1],[855,13,855,74,1],[857,13,857,66,1],[858,13,858,103,1],[859,13,859,103,1],[861,13,861,106,1],[863,13,863,115,1],[864,13,864,115,1],[866,13,866,37,1],[867,13,867,39,1],[868,13,868,59,1],[869,13,869,64,1],[870,13,870,46,1],[872,13,875,15,1],[876,13,876,44,1],[878,13,878,68,1],[880,13,880,36,1],[881,13,881,56,1],[882,13,882,65,1],[883,13,883,66,1],[884,13,884,70,1],[885,9,885,10,1]]);
    </script>
  </body>
</html>